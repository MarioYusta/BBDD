CREATE TABLE SEDE(
COD_SEDE CHAR (4) CONSTRAINT PK_SEDE PRIMARY KEY,
NOMBRE VARCHAR (15) NOT NULL,
DIRECCION VARCHAR (30) NOT NULL
);
CREATE TABLE DEPARTAMENTO(
COD_DEP CHAR (4) NOT NULL,
NOMBRE VARCHAR (15) NOT NULL,
UBICACION VARCHAR (30) NOT NULL,
COD_SEDE CHAR (4) NOT NULL,
CONSTRAINT PK_DEPTO PRIMARY KEY (COD_DEP, COD_SEDE),
CONSTRAINT FK_SEDE FOREIGN KEY (COD_SEDE) REFERENCES SEDE(COD_SEDE)
);
CREATE TABLE PROGRAMADOR(
DNI CHAR (9) NOT NULL,
NOMBRE VARCHAR (15) NOT NULL,
AP1 VARCHAR (15) NOT NULL,
AP2 VARCHAR (15) NULL,
DIRECCION VARCHAR (30) NOT NULL,
CUENTA CHAR (20) NOT NULL,
TELEFONO CHAR (9) NOT NULL,
TIPO VARCHAR (15) NOT NULL,
DNI_MENTOR CHAR (9) NOT NULL,
COD_DEP CHAR (4) NOT NULL,
COD_SEDE CHAR (4)NOT NULL,
CONSTRAINT PK_PROGRAMADOR PRIMARY KEY (DNI, COD_DEP, COD_SEDE),
CONSTRAINT FK_DEPTO2 FOREIGN KEY (COD_DEP, COD_SEDE) REFERENCES DEPARTAMENTO(COD_DEP, COD_SEDE)
);

ALTER TABLE PROGRAMADOR ADD CONSTRAINT FK_MENTOR FOREIGN KEY (DNI_MENTOR, COD_DEP, COD_SEDE) REFERENCES PROGRAMADOR(DNI, COD_DEP, COD_SEDE)

CREATE TABLE EQUIPO(
COD_EQUIPO CHAR (4) NOT NULL CONSTRAINT PK_EQUIPO PRIMARY KEY,
DESCRIPCION VARCHAR (40) NOT NULL,
DNI_PROG_JEFE CHAR (9) NOT NULL,
COD_DEP CHAR (4) NOT NULL,
COD_SEDE CHAR (4)NOT NULL
);

ALTER TABLE EQUIPO ADD CONSTRAINT FK_JEFE_PROG FOREIGN KEY (DNI_PROG_JEFE, COD_DEP, COD_SEDE) REFERENCES PROGRAMADOR(DNI, COD_DEP, COD_SEDE)

CREATE TABLE EQUIPO_PROG(
DNI_PROG CHAR (9) NOT NULL,
COD_EQUIPO CHAR (4) NOT NULL,
COD_DEP CHAR (4) NOT NULL,
COD_SEDE CHAR (4)NOT NULL,
CONSTRAINT PK_EQUIPO_PROG PRIMARY KEY (DNI_PROG, COD_EQUIPO),
CONSTRAINT FK_PROG FOREIGN KEY (DNI_PROG, COD_DEP, COD_SEDE) REFERENCES PROGRAMADOR(DNI, COD_DEP, COD_SEDE),
CONSTRAINT FK_EQUIPO FOREIGN KEY (COD_EQUIPO) REFERENCES EQUIPO(COD_EQUIPO)
);
CREATE TABLE PROYECTO(
COD_PROY CHAR (4) NOT NULL,
DESCRIPCION VARCHAR (40) NOT NULL,
FECHA_FIN DATE NOT NULL,
COD_EQUIPO CHAR (4) NOT NULL,
COD_PARTE_PROY CHAR (4) NOT NULL,
CONSTRAINT PK_PROYECTO PRIMARY KEY (COD_PROY, COD_EQUIPO),
CONSTRAINT FK_EQUIPO2 FOREIGN KEY (COD_EQUIPO) REFERENCES EQUIPO(COD_EQUIPO)
);
ALTER TABLE PROYECTO ADD CONSTRAINT FK_SUBPROYECTO FOREIGN KEY (COD_PARTE_PROY) REFERENCES EQUIPO(COD_EQUIPO)